# tcp 拥塞控制

1. 滑动窗口（也是用来控制乱序重排）
2. 慢开始
2. 快重传
3. 快恢复

## 为什么 tcp 需要拥塞控制？

如果 tcp 没有拥塞控制，在网络很差的情况下，会不断的对之前发的大量segement 进行重传，导致网络越来越差

## 滑动窗口

发送方动态维护一个滑动窗口，进行乱序重排，批量确认等，滑动窗口取决于网络拥塞程度


## 慢启动

发送方一开始设置 cwnd（拥塞窗口） = 1，发送第一个报文段M1，收到确认后，cwnd 加倍

为了避免 cwnd 增长过快，设置一个慢开始门限 ssthresh 状态变量

1. 当cwnd < ssthresh 使用慢开始算法，cwnd 加倍
2. 当cwnd > sshthresh 使用拥塞控制算法，cwnd 缓慢加1

## 拥塞避免

当判断网络拥塞时，将 sshthresh = cwnd/2, cwnd = 1

## 快重传

当接收方收到M1，M3,M4等字段时，发现M3,M4是乱序的字段，那么快速重传ACK M2（期待收到M2）， 当发送方接到三次重传时，立刻重传M2，防止双方傻傻等待

## 快恢复

当发送方连续收到三个确认时，将ssthresh减半和cwnd减半，为什么 cwnd 不置为1呢？ 因为现在还不是最坏情况吧
 